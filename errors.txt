 | ERROR:app.diarization:Failed to load diarization pipeline after 0.00 seconds: An error happened while trying to locate the file on the Hub and we cannot find the requested files in the local cache. Please check your connection and try again or make sure your Internet connection is on.
whisper_transcription  | ERROR:app.diarization:Full traceback:
whisper_transcription  | Traceback (most recent call last):
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 1376, in _get_metadata_or_catch_error
whisper_transcription  |     metadata = get_hf_file_metadata(
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py", line 114, in _inner_fn
whisper_transcription  |     return fn(*args, **kwargs)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 1296, in get_hf_file_metadata
whisper_transcription  |     r = _request_wrapper(
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 280, in _request_wrapper
whisper_transcription  |     response = _request_wrapper(
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 303, in _request_wrapper
whisper_transcription  |     response = get_session().request(method=method, url=url, **params)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
whisper_transcription  |     resp = self.send(prep, **send_kwargs)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
whisper_transcription  |     r = adapter.send(request, **kwargs)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/utils/_http.py", line 107, in send
whisper_transcription  |     raise OfflineModeIsEnabled(
whisper_transcription  | huggingface_hub.errors.OfflineModeIsEnabled: Cannot reach https://huggingface.co/pyannote/speaker-diarization-3.1/resolve/main/config.yaml: offline mode is enabled. To disable it, please unset the `HF_HUB_OFFLINE` environment variable.
whisper_transcription  |
whisper_transcription  | The above exception was the direct cause of the following exception:
whisper_transcription  |
whisper_transcription  | Traceback (most recent call last):
whisper_transcription  |   File "/app/app/diarization.py", line 122, in load_pipeline
whisper_transcription  |     self.pipeline = Pipeline.from_pretrained(DIARIZATION_MODEL, use_auth_token=hf_token)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/pyannote/audio/core/pipeline.py", line 88, in from_pretrained
whisper_transcription  |     config_yml = hf_hub_download(
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py", line 114, in _inner_fn
whisper_transcription  |     return fn(*args, **kwargs)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 862, in hf_hub_download
whisper_transcription  |     return _hf_hub_download_to_cache_dir(
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 969, in _hf_hub_download_to_cache_dir
whisper_transcription  |     _raise_on_head_call_error(head_call_error, force_download, local_files_only)
whisper_transcription  |   File "/usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py", line 1489, in _raise_on_head_call_error
whisper_transcription  |     raise LocalEntryNotFoundError(
whisper_transcription  | huggingface_hub.errors.LocalEntryNotFoundError: An error happened while trying to locate the file on the Hub and we cannot find the requested files in the local cache. Please check your connection and try again or make sure your Internet connection is on.
whisper_transcription  | WARNING:app.utils:Diarization attempt 3 failed: An error happened while trying to locate the file on the Hub and we cannot find the requested files in the local cache. Please check your connection and try again or make sure your Internet connection is on.
whisper_transcription  | ERROR:app.utils:All 3 diarization attempts failed, giving up
whisper_transcription  | ERROR:app.utils:Diarization failed: An error happened while trying to locate the file on the Hub and we cannot find the requested files in the local cache. Please check your connection and try again or make sure your Internet connection is on.
whisper_transcription  | INFO:app.utils:Continuing without diarization - using generic speaker labels
whisper_transcription  | INFO:app.utils:Creating fallback speaker segments using basic heuristics
whisper_transcription  | INFO:app.utils:Created 95 fallback segments in 0.00 seconds
whisper_transcription  | INFO:app.utils:Cleaning up temporary audio file /tmp/audio_6360260522926182500.mp3
whisper_transcription  | INFO:app.utils:Temporary audio file /tmp/audio_6360260522926182500.mp3 has been deleted.
whisper_transcription  | INFO:app.utils:Total transcription process completed in 163.92 seconds
whisper_transcription  | INFO:app.main:[9c331704] Transcription completed in 163.91s: 95 segments, 4481 characters
whisper_transcription  | INFO:app.main:[9c331704] Diarization results: 2 speakers detected
whisper_transcription  | INFO:app.main:[9c331704] Speaker SPEAKER_1: 95 segments (100.0%)
whisper_transcription  | INFO:app.main:[9c331704] Assembling response
whisper_transcription  | INFO:app.main:[9c331704] Request successfully processed in 165.13s
whisper_transcription  | INFO:     172.18.0.1:55662 - "POST /transcribe HTTP/1.1" 200 OK
